{% extends 'base.html' %}

{% block title %}Сотрудники{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3">
  <h1 class="mb-0">Сотрудники</h1>
  <div class="d-flex align-items-center gap-2">
    <input type="text" class="form-control form-control-sm" placeholder="Поиск" data-table-filter="#employeesTable">
    <a href="{{ url_for('add_employee') }}" class="btn btn-primary"><i class="bi bi-person-plus me-1"></i>Добавить</a>
  </div>
  </div>

<div class="card">
  <div class="card-body">
    {% if employees %}
      <div class="table-responsive">
        <table id="employeesTable" class="table table-striped align-middle">
          <thead>
            <tr>
              <th>Имя</th>
              <th>Должность</th>
              <th>Отдел</th>
              <th>Действия</th>
            </tr>
          </thead>
          <tbody>
            {% for emp in employees %}
            <tr>
              <td>{{ emp.name }}</td>
              <td>{{ emp.position or '-' }}</td>
              <td>{{ emp.department.name if emp.department else '—' }}</td>
              <td>
                <a href="{{ url_for('edit_employee', employee_id=emp.id) }}" class="btn btn-warning btn-sm me-2">Изменить</a>
                <form method="POST" action="{{ url_for('delete_employee', employee_id=emp.id) }}" style="display:inline-block;">
                  <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Удалить сотрудника?')">Удалить</button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="text-muted mb-0">Сотрудников пока нет.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
