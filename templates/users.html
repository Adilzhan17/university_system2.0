{% extends 'base.html' %}

{% block title %}Пользователи{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3">
  <h1 class="mb-0">Пользователи</h1>
</div>

<div class="card mb-4">
  <div class="card-header"><h5 class="mb-0">Создать пользователя</h5></div>
  <div class="card-body">
    <form method="POST">
      <div class="row g-3">
        <div class="col-md-3">
          <label class="form-label" for="username">Логин</label>
          <input id="username" name="username" class="form-control" required>
        </div>
        <div class="col-md-3">
          <label class="form-label" for="password">Пароль</label>
          <input id="password" name="password" type="password" class="form-control" required>
        </div>
        <div class="col-md-3">
          <label class="form-label" for="role">Роль</label>
          <select id="role" name="role" class="form-select">
            <option value="student">student</option>
            <option value="teacher">teacher</option>
            <option value="admin">admin</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label" for="student_id">Привязать к студенту (для роли student)</label>
          <select id="student_id" name="student_id" class="form-select">
            <option value="">—</option>
            {% for s in students %}
              <option value="{{ s.id }}">{{ s.name }} ({{ s.email }})</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <div class="mt-3">
        <button type="submit" class="btn btn-primary">Создать</button>
      </div>
    </form>
  </div>
  </div>

<div class="card">
  <div class="card-header"><h5 class="mb-0">Список пользователей</h5></div>
  <div class="card-body">
    {% if users %}
      <div class="table-responsive">
        <table class="table table-striped align-middle">
          <thead>
            <tr>
              <th>ID</th>
              <th>Логин</th>
              <th>Роль</th>
            </tr>
          </thead>
          <tbody>
            {% for u in users %}
              <tr>
                <td>{{ u.id }}</td>
                <td>{{ u.username }}</td>
                <td>{{ u.role }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="text-muted mb-0">Пользователей нет.</p>
    {% endif %}
  </div>
  </div>
{% endblock %}

